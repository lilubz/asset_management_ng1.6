!function(){"use strict";angular.module("app",["ui.router","oc.lazyLoad","ngAnimate","ngCookies","validation","angularFileUpload","oitozero.ngSweetAlert"])}(),function(){"use strict";function e(){}angular.module("app").component("assetModal",function(){return{templateUrl:"components/asset-modal/asset-modal.template.html",controller:e,bindings:{modalTitle:"@",btnName:"@",isDisable:"<",modal:"<",showModal:"=",clean:"&",submit:"&"}}}()),e.$inject=[]}(),function(){"use strict";function e(){}angular.module("app").component("assetTable",function(){return{templateUrl:"components/asset-table/asset-table.template.html",controller:e,bindings:{data:"<",theadInfo:"<",firstAction:"&",secondAction:"&",thirdAction:"&",hasCheckbox:"<",isSelectedArray:"<"},transclude:{checkbox:"?tableCheckbox",button:"?tableButton"}}}()),e.$inject=[]}(),function(){"use strict";function e(e,t,a){function o(e){var t=e.list[0],a={theadEng:[],theadChn:[],theadStyle:{}};return angular.forEach(t,function(e,t){if("createTime"!==t&&"updateTime"!==t){var o;switch(t){case"assetId":o="资产编号";break;case"assetName":o="资产名称";break;case"assetCategory":o="资产类别";break;case"brandSpecification":o="品牌规格";break;case"unitMeasurement":o="计量单位";break;case"bookAmount":o="资产账面数量";break;case"inventoryAmount":o="资产盘点数量";break;case"storageLocation":o="存放地点";break;case"departmentResponsibility":o="责任部门";break;case"personInCharge":o="责任人";break;case"statusUsage":o="使用状况"}a.theadEng.push(t),a.theadChn.push(o)}}),a.theadStyle={width:1/a.theadEng.length*100+"%"},a}return{tableInitailize:o}}angular.module("app").factory("assetTableService",e),e.$inject=["$rootScope","$state","$http","interfacesService"]}(),function(){"use strict";function e(){var e=this;e.$onChanges=function(t){t.searchPageSize&&!t.searchPageSize.isFirstChange()&&e.searchAction({searchType:e.lastSearchRecord.searchType,searchKeyWord:e.lastSearchRecord.searchKeyWord,assetCategory:e.lastSearchRecord.assetCategory,departmentResponsibility:e.lastSearchRecord.departmentResponsibility,pageNum:1,url:e.searchUrl}),t.searchPageNumber&&!t.searchPageNumber.isFirstChange()&&e.searchAction({searchType:e.lastSearchRecord.searchType,searchKeyWord:e.lastSearchRecord.searchKeyWord,assetCategory:e.lastSearchRecord.assetCategory,departmentResponsibility:e.lastSearchRecord.departmentResponsibility,pageNum:e.searchInfo.searchPageNumber,url:e.searchUrl})}}angular.module("app").component("pagination",function(){return{templateUrl:"components/pagination/pagination.template.html",controller:e,bindings:{data:"<",searchInfo:"<",searchPageSize:"<",searchPageNumber:"<",searchUrl:"<",lastSearchRecord:"<",searchPageNumberChange:"&",searchAction:"&"}}}()),e.$inject=[]}(),function(){"use strict";function e(e,t,a){function o(e){return e.replace(/(^\s*)|(\s*$)/g,"")}function r(e,t){a.getRequest(e).then(function(e){0==e.data.status&&(d[t+"Array"]=e.data.data)})}function n(){if(u="","assetId"!=d.searchInfo.searchType){var e=o(d.searchInfo.searchKeyWord);if(d.showAutoComplete=!0,!e)return void(d.autoCompleteArray=[]);e&&u!==e&&(u=e,a.getTableInfoRequest(t[d.searchUrl],d.searchInfo.searchType,e,"","",1,99).then(function(e){200==e.status&&e.data.data.list&&(l=e.data.data.list,d.createAutoCompleteArray())}))}}function s(){if(d.autoCompleteArray=[],l.length)for(var e=d.searchInfo.searchType,t=0;t<l.length;t++)l[t][e]&&-1===d.autoCompleteArray.indexOf(l[t][e])&&d.autoCompleteArray.push(l[t][e])}function c(e){d.showAutoComplete=!1,d.autoCompleteArray=[],d.searchInfo.searchKeyWord=e,d.searchAction({searchType:d.searchInfo.searchType,searchKeyWord:e,assetCategory:"",departmentResponsibility:"",pageNum:1})}function i(){!0===d.showAutoComplete&&e(function(){d.showAutoComplete=!1,d.autoCompleteArray=[],u=""},200)}var l,u,d=this;d.departmentArray=[],d.categoryArray=[],d.autoCompleteArray=[],d.showAutoComplete=!1,d.$onChanges=function(e){e.searchType&&(d.searchInfo.searchKeyWord="")},d.getDeptAndCateArray=r,d.autoSearch=n,d.createAutoCompleteArray=s,d.selectAutoCompleteItem=c,d.hide=i,d.getDeptAndCateArray(t.getDepartment,"department"),d.getDeptAndCateArray(t.getCategory,"category")}angular.module("app").component("searchGroup",function(){return{templateUrl:"components/search-group/search-group.template.html",controller:e,bindings:{searchType:"<",searchInfo:"<",lastSearchRecord:"<",searchUrl:"<",searchAction:"&"}}}()),e.$inject=["$timeout","interfacesService","httpService"]}(),function(){"use strict";function e(){}angular.module("app").component("warningModal",function(){return{templateUrl:"components/warning-modal/warning-modal.template.html",controller:e,bindings:{modalTitle:"@",showModal:"=",clean:"&"},transclude:{div:"?modalDiv",text:"?modalText",reminder:"?modalReminder"}}}()),e.$inject=[]}(),function(){"use strict";function e(e,t){var a=this;a.breadcrumbArr=e.updateBreadcrumbs(),t.$on("$stateChangeSuccess",function(){a.breadcrumbArr=e.updateBreadcrumbs()})}angular.module("app").component("appBreadcrumb",function(){return{templateUrl:"layout/app-breadcrumb/breadcrumb.template.html",controller:e}}()),e.$inject=["breadcrumbService","$scope"]}(),function(){"use strict";function e(e,t,a,o){function r(){for(var e=[],a=t.$current.name;a;a=this.breadcrumbParentState(a))this.generateBreadcrumbs(e,a);return e=e.length>1?e.reverse():e}function n(r,n){for(var s,c,i=!1,l=0;l<r.length;l++)if(r[l].link===n)return;var u=t.get(n);u.breadcrumb&&u.breadcrumb.label?(c=u.breadcrumb.label,s=o(c)(e)):s=u.name,u.breadcrumb&&u.breadcrumb.skip&&(i=!0),u.abstract||i||(u.breadcrumb&&u.breadcrumb.param&&r.push({link:n,label:a[u.breadcrumb.param],abstract:!1}),u.breadcrumb&&u.breadcrumb.param||r.push({link:n,label:s,abstract:!1}))}function s(a){var o=t.get(a);if(!o.abstract){if(o.breadcrumb&&o.breadcrumb.parent){var r="function"==typeof o.breadcrumb.parent,n=r?o.breadcrumb.parent(e):o.breadcrumb.parent;if(n)return n}var s=o.parent(/^(.+)\.[^.]+$/.exec(o.name))[1];return"object"==typeof s?s.name:s}}return{updateBreadcrumbs:r,generateBreadcrumbs:n,breadcrumbParentState:s}}angular.module("app").factory("breadcrumbService",e),e.$inject=["$rootScope","$state","$stateParams","$interpolate"]}(),function(){"use strict";function e(e,t,a,o,r){function n(){a.getRequest(t.logout).then(function(t){0===t.data.status?(o.remove("identity"),e.go("sign.login")):SweetAlert.swal({title:"登出失败",text:t.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})}).catch(function(e){SweetAlert.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}var s=this;s.userInfo=r.getUserInfo(),s.logout=n}angular.module("app").component("appHead",function(){return{templateUrl:"layout/app-head/head.template.html",controller:e}}()),e.$inject=["$state","interfacesService","httpService","cacheService","authorizationService"]}(),function(){"use strict";function e(e,t,a){var o=this;o.currentState=t.$current.name,a.$on("$stateChangeSuccess",function(){o.currentState=t.$current.name})}angular.module("app").component("appSidebar",function(){return{templateUrl:"layout/app-sidebar/sidebar.template.html",controller:e}}()),e.$inject=["$rootScope","$state","$scope"]}(),function(){"use strict";function e(e,t,a,o){function r(){l.modalInfo.showModal=!1,l.assetId=""}function n(e){e<1||e>l.data.pages||(l.searchInfo.searchPageNumber=e)}function s(r,n,s,c,i,u){var d=l.lastSearchRecord;l.loading=!0,t.getTableInfoRequest(e[u],r,n,s,c,i,l.searchInfo.searchPageSize).then(function(e){200==e.status&&e.data.data.list?(d.searchType=r,d.searchKeyWord=n,d.assetCategory=s,d.departmentResponsibility=c,l.data=e.data.data,l.searchInfo.searchPageNumber!=e.data.data.pageNum&&e.data.data.pageNum&&(l.searchInfo.searchPageNumber=e.data.data.pageNum),l.theadInfo=a.tableInitailize(l.data)):l.data.list=[],l.loading=!1}).catch(function(e){l.loading=!1,o.swal({title:"服务器出错了",text:e.statusText,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function c(){t.formPostRequest(e.clearInventoryAmount).then(function(e){0==e.data.status?(o.swal("清空资产盘点成功",e.data.msg,"success"),l.modalInfo.showClearModal=!1,l.getInventory("","","","",1,"getNotCompleteInventory"),l.searchInfo.inventoryType="getNotCompleteInventory"):(o.swal({title:"清空资产盘点失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}),l.modalInfo.showClearModal=!1)}).catch(function(e){o.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function i(){var a={assetId:l.assetId};t.formPostRequest(e.assetsInventory,a).then(function(e){0==e.data.status?(o.swal("盘点资产成功",e.data.msg,"success"),l.clean(),l.getInventory("","","","",1,"getCompleteInventory"),l.searchInfo.inventoryType="getCompleteInventory"):(o.swal({title:"盘点资产失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}),l.clean())}).catch(function(e){o.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}var l=this;l.data={},l.theadInfo={},l.loading=!1,l.assetId="",l.searchInfo={searchType:"",searchKeyWord:"",assetCategory:"",departmentResponsibility:"",searchPageNumber:1,searchPageSize:"10",inventoryType:"getNotCompleteInventory"},l.lastSearchRecord={searchType:"",searchKeyWord:"",assetCategory:"",departmentResponsibility:""},l.modalInfo={showModal:!1,showClearModal:!1},l.clean=r,l.searchPageNumberChange=n,l.getInventory=s,l.clearInventoryAmount=c,l.assetInventory=i,l.getInventory("","","","",1,"getNotCompleteInventory")}angular.module("app").component("assetInventory",function(){return{templateUrl:"pages/asset-inventory/asset-inventory.template.html",controller:e,bindings:{inventoryType:"<"}}}()),e.$inject=["interfacesService","httpService","assetTableService","SweetAlert"]}(),function(){"use strict";function e(e,t,a,o){function r(e){e<1||e>y.data.pages||(y.searchInfo.searchPageNumber=e)}function n(e){y.modalInfo.showSingleDeleteModal=!0,y.selectedItem=e}function s(){y.selectedArray=y.createDataList(),y.selectedArray.length&&(y.modalInfo.showMultipleDeleteModal=!0)}function c(){var e=y.selectAll;angular.forEach(y.isSelectedArray,function(t,a,o){o[a]=e})}function i(){!0===y.selectAll&&(y.selectAll=!1),!1===y.selectAll&&(y.selectAll=-1===y.isSelectedArray.indexOf(!1))}function l(r,n,s,c,i){var l=y.lastSearchRecord;y.loading=!0,t.getTableInfoRequest(e.getAssetRecycle,r,n,s,c,i,y.searchInfo.searchPageSize).then(function(e){if(200==e.status&&e.data.data.list){l.searchType=r,l.searchKeyWord=n,l.assetCategory=s,l.departmentResponsibility=c,y.data=e.data.data,y.searchInfo.searchPageNumber!=e.data.data.pageNum&&e.data.data.pageNum&&(y.searchInfo.searchPageNumber=e.data.data.pageNum),y.theadInfo=a.tableInitailize(y.data),y.selectAll=!1,y.isSelectedArray=[];for(var t=0;t<y.data.list.length;t++)y.isSelectedArray.push(!1)}else y.data.list=[];y.loading=!1}).catch(function(e){y.loading=!1,o.swal({title:"服务器出错了",text:e.statusText,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function u(a){var r={assetId:a};t.formPostRequest(e.notExistItemInAssetTable,r).then(function(e){0==e.data.status?y.recycleAssetItem(r):o.swal({title:"如果恢复，则现资产表中相同资产编号的资产将被覆盖",text:e.data.msg,type:"warning",confirmButtonColor:"#F8BB86",confirmButtonText:"确定恢复",showCancelButton:!0,closeOnConfirm:!1,closeOnCancel:!0},function(e){e&&y.recycleAssetItem(r)})}).catch(function(e){o.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function d(a){var r=y.lastSearchRecord;t.formPostRequest(e.recycleAssetItem,a).then(function(e){0==e.data.status?(o.swal("恢复成功",e.data.msg,"success"),y.getAssetRecycle(r.searchType,r.searchKeyWord,r.assetCategory,r.departmentResponsibility,y.searchInfo.searchPageNumber)):o.swal({title:"恢复失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})}).catch(function(e){o.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function m(){var a=y.lastSearchRecord,r={assetId:y.selectedItem.assetId};t.formPostRequest(e.deleteAssetRecycleItem,r).then(function(e){0==e.data.status?(o.swal("删除成功",e.data.msg,"success"),y.modalInfo.showSingleDeleteModal=!1,y.getAssetRecycle(a.searchType,a.searchKeyWord,a.assetCategory,a.departmentResponsibility,y.searchInfo.searchPageNumber)):(o.swal({title:"删除失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}),y.modalInfo.showSingleDeleteModal=!1)}).catch(function(e){o.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function p(){var e=[],t=y.data.list;return-1==y.isSelectedArray.indexOf(!0)?void o.swal({title:"恢复失败",text:"未选择任何资产记录",type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}):(angular.forEach(y.isSelectedArray,function(a,o,r){!0===a&&e.push(t[o].assetId)}),e)}function f(){var a=y.createDataList();a&&t.JSONPostRequest(e.notExistMultiItemInAssetTable,a).then(function(e){0==e.data.status?y.recycleAssetMultiItem(a):o.swal({title:"如果恢复，则下列资产编号的资产信息将被覆盖",text:e.data.data,type:"warning",confirmButtonColor:"#F8BB86",confirmButtonText:"确定恢复",showCancelButton:!0,closeOnConfirm:!1,closeOnCancel:!0},function(e){e&&y.recycleAssetMultiItem(a)})}).catch(function(e){o.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function g(a){var r=y.lastSearchRecord;t.JSONPostRequest(e.recycleAssetMultiItem,a).then(function(e){0==e.data.status?(o.swal("恢复成功",e.data.msg,"success"),y.getAssetRecycle(r.searchType,r.searchKeyWord,r.assetCategory,r.departmentResponsibility,y.searchInfo.searchPageNumber)):o.swal({title:"恢复失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})}).catch(function(e){o.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function h(){var a=y.lastSearchRecord;t.JSONPostRequest(e.deleteAssetRecycleMultiItem,y.selectedArray).then(function(e){0==e.data.status?(o.swal("删除成功",e.data.msg,"success"),y.modalInfo.showMultipleDeleteModal=!1,y.getAssetRecycle(a.searchType,a.searchKeyWord,a.assetCategory,a.departmentResponsibility,y.searchInfo.searchPageNumber)):(o.swal({title:"删除失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}),y.modalInfo.showMultipleDeleteModal=!1)}).catch(function(e){o.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}var y=this;y.data={},y.theadInfo={},y.loading=!1,y.selectAll=!1,y.selectedItem={},y.selectedArray=[],y.isSelectedArray=[],y.searchInfo={searchType:"",searchKeyWord:"",assetCategory:"",departmentResponsibility:"",searchPageNumber:1,searchPageSize:"10"},y.lastSearchRecord={searchType:"",searchKeyWord:"",assetCategory:"",departmentResponsibility:""},y.modalInfo={showSingleDeleteModal:!1,showMultipleDeleteModal:!1},y.searchPageNumberChange=r,y.showSingleDeleteModal=n,y.showMultipleDeleteModal=s,y.selectAllCheckBox=c,y.selectSingleCheckBox=i,y.getAssetRecycle=l,y.notExistItemInAssetTable=u,y.recycleAssetItem=d,y.deleteAssetRecycleItem=m,y.createDataList=p,y.notExistMultiItemInAssetTable=f,y.recycleAssetMultiItem=g,y.deleteAssetRecycleMultiItem=h,y.getAssetRecycle("","","","",1)}angular.module("app").component("assetRecovery",function(){return{templateUrl:"pages/asset-recovery/asset-recovery.template.html",controller:e}}()),e.$inject=["interfacesService","httpService","assetTableService","SweetAlert"]}(),function(){"use strict";function e(e,t,a,o,r){function n(e){var t=C.modalInfo;t.editModal.show=!0,angular.forEach(t.modal,function(a,o){t.modal[o]=e[o]})}function s(e){C.modalInfo.deleteModal.show=!0,C.selectedItem=e}function c(){var e=C.modalInfo;angular.forEach(e.modal,function(t,a){e.modal[a]=""})}function i(e){e<1||e>C.data.pages||(C.searchInfo.searchPageNumber=e)}function l(o,n,s,c,i){var l=C.lastSearchRecord;C.loading=!0,t.getTableInfoRequest(e.getAssetUrl,o,n,s,c,i,C.searchInfo.searchPageSize).then(function(e){200==e.status&&e.data.data.list?(l.searchType=o,l.searchKeyWord=n,l.assetCategory=s,l.departmentResponsibility=c,C.data=e.data.data,C.searchInfo.searchPageNumber!=e.data.data.pageNum&&e.data.data.pageNum&&(C.searchInfo.searchPageNumber=e.data.data.pageNum),C.theadInfo=a.tableInitailize(C.data)):C.data.list=[],C.loading=!1}).catch(function(e){C.loading=!1,r.swal({title:"服务器出错了",text:e.statusText,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function u(){var a=C.lastSearchRecord,o=C.modalInfo;(!o.modal.bookAmount||o.modal.bookAmount<0)&&(o.modal.bookAmount=0),(!o.modal.inventoryAmount||o.modal.inventoryAmount<0)&&(o.modal.inventoryAmount=0),t.formPostRequest(e.addUrl,C.modalInfo.modal).then(function(e){0==e.data.status?(r.swal("添加成功",e.data.msg,"success"),C.modalInfo.addModal.show=!1,C.clean(),C.searchItem(a.searchType,a.searchKeyWord,a.assetCategory,a.departmentResponsibility,1)):r.swal({title:"添加失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})}).catch(function(e){r.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function d(){var a=C.lastSearchRecord,o=C.modalInfo;(!o.modal.bookAmount||o.modal.bookAmount<0)&&(o.modal.bookAmount=0),(!o.modal.inventoryAmount||o.modal.inventoryAmount<0)&&(o.modal.inventoryAmount=0),t.formPostRequest(e.updateUrl,C.modalInfo.modal).then(function(e){0==e.data.status?(r.swal("编辑成功",e.data.msg,"success"),C.modalInfo.editModal.show=!1,C.clean(),C.searchItem(a.searchType,a.searchKeyWord,a.assetCategory,a.departmentResponsibility,C.searchInfo.searchPageNumber)):r.swal({title:"编辑失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})}).catch(function(e){r.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function m(){var a=C.lastSearchRecord,o={assetId:C.selectedItem.assetId};C.modalInfo.deleteModal.show=!1,C.selectedItem={},t.formPostRequest(e.deleteUrl,o).then(function(e){0==e.data.status?(r.swal("删除成功",e.data.msg,"success"),C.searchItem(a.searchType,a.searchKeyWord,a.assetCategory,a.departmentResponsibility,C.searchInfo.searchPageNumber)):r.swal({title:"删除失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})}).catch(function(e){r.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function p(a,o){var n={assetId:a,assetName:o};t.formPostRequest(e.printQRcode,n).then(function(e){0==e.data.status?r.swal("打印成功",e.data.msg,"success"):r.swal({title:"打印失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})}).catch(function(e){r.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function f(){C.modalInfo.importModal.show=!1,C.modalInfo.importModal.currentStep=1,C.uploader.queue.length&&C.uploader.clearQueue()}function g(e){var t=C.modalInfo;1===t.importModal.currentStep&&-1===e||3===t.importModal.currentStep&&1===e||(t.importModal.currentStep+=e)}function h(){var e=C.uploader,t=e.queue.length,a=e.queue[0].file.name.split("."),o=a[a.length-1];if("xls"!==o&&"xlsx"!==o||1!==t)return void r.swal({title:"出错了",text:"只能上传一个以xls或xlsx结尾的文件",type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"});e.queue[0].upload()}function y(){var t=C.lastSearchRecord,a="",o="",r="",n="",s="?";t.searchType&&t.searchKeyWord&&(a=t.searchType,o=t.searchKeyWord,s+=a+"="+o+"&"),t.assetCategory&&(r=t.assetCategory,s+="assetCategory="+r+"&"),t.departmentResponsibility&&(n=t.departmentResponsibility,s+="departmentResponsibility="+n+"&"),C.exportUrl=e.exportUrl+s,C.modalInfo.exportModal.show=!0}function v(e){var t=C.uploader,a=t.queue.length,o=t.queue[a-1];a>1&&(t.clearQueue(),t.queue.push(o))}function b(e,t,a,o){if(0==t.status){var n=t.data,s=n.split("excel中读取")[1].split("条记录")[0],c=n.split("写入数据库")[1].split("条记录")[0];if(0==s)return r.swal({title:"上传失败",text:"上传成功0条，上传表格格式/内容错误",type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}),void C.importModalInitialize();if(0!=s&&0==c)return r.swal({title:"上传失败",text:"上传成功0条，可能由于资产ID已经存在",type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}),void C.importModalInitialize();if(s!=c)return r.swal({title:"部分上传成功",text:"上传成功"+c+"条，失败"+(s-c)+"条，可能由于资产ID已经存在",type:"warning",confirmButtonColor:"#F8BB86",confirmButtonText:"确定"}),C.importModalInitialize(),void C.searchItem("","","","",1);if(s==c&&c>0)return r.swal("上传成功","批量添加资产信息成功","success"),C.importModalInitialize(),void C.searchItem("","","","",1)}else r.swal({title:"上传失败",text:t.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}),C.importModalInitialize()}var C=this;C.data={},C.theadInfo={},C.loading=!1,C.selectedItem={},C.searchInfo={searchType:"",searchKeyWord:"",assetCategory:"",departmentResponsibility:"",searchPageNumber:1,searchPageSize:"10"},C.lastSearchRecord={searchType:"",searchKeyWord:"",assetCategory:"",departmentResponsibility:""},C.modalInfo={addModal:{show:!1},editModal:{show:!1},deleteModal:{show:!1},importModal:{show:!1,currentStep:1},exportModal:{show:!1},modal:{assetId:"",assetName:"",assetCategory:"",brandSpecification:"",unitMeasurement:"",bookAmount:"",inventoryAmount:"",storageLocation:"",departmentResponsibility:"",personInCharge:"",statusUsage:""}},C.uploader=new o({url:e.importUrl,method:"POST"}),C.showEditModal=n,C.showDeleteModal=s,C.clean=c,C.searchPageNumberChange=i,C.searchItem=l,C.addItem=u,C.editItem=d,C.deleteItem=m,C.printQRcode=p,C.importModalInitialize=f,C.stepChange=g,C.importAssetList=h,C.exportAssetList=y,C.uploader.onAfterAddingFile=v,C.uploader.onSuccessItem=b,C.searchItem("","","","",1)}angular.module("app").component("assetSearch",function(){return{templateUrl:"pages/asset-search/asset-search.template.html",controller:e}}()),e.$inject=["interfacesService","httpService","assetTableService","FileUploader","SweetAlert"]}(),function(){"use strict";function e(e,t,a){function o(e,t){u.modalInfo["show"+t+"Modal"]=!0,u.selectedItem=e}function r(o,r){u[o+"Loading"]=!0,t.getRequest(e["get"+r]).then(function(e){0==e.data.status?u[o+"Array"]=e.data.data:u[o+"Array"]=[],u[o+"Loading"]=!1}).catch(function(e){u[o+"Loading"]=!1,a.swal({title:"服务器出错了",text:e.statusText,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function n(o,r){var n={id:u.selectedItem.id};t.formPostRequest(e["delete"+r],n).then(function(e){0==e.data.status?(a.swal("删除成功",e.data.msg,"success"),u.modalInfo["show"+r+"Modal"]=!1,u.getDatas(o,r)):(a.swal({title:"删除失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}),u.modalInfo["show"+r+"Modal"]=!1)}).catch(function(e){a.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function s(){var o={departmentName:u.addDepartmentInput};t.formPostRequest(e.addDepartment,o).then(function(e){0==e.data.status?(a.swal("增加成功",e.data.msg,"success"),u.modalInfo.showDepartmentModal=!1,u.getDatas("department","Department")):(a.swal({title:"增加失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}),u.modalInfo.showDepartmentModal=!1)}).catch(function(e){a.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function c(){var o={id:u.selectedItem.id,departmentName:u.selectedItem.departmentName};t.formPostRequest(e.updateDepartment,o).then(function(e){0==e.data.status?(a.swal("编辑成功",e.data.msg,"success"),u.modalInfo.showDepartmentModal=!1,u.getDatas("department","Department")):(a.swal({title:"编辑失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}),u.modalInfo.showDepartmentModal=!1)}).catch(function(e){a.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function i(){var o={categoryName:u.addCategoryInput};t.formPostRequest(e.addCategory,o).then(function(e){0==e.data.status?(a.swal("增加成功",e.data.msg,"success"),u.modalInfo.showCategoryModal=!1,u.getDatas("category","Category")):(a.swal({title:"增加失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}),u.modalInfo.showCategoryModal=!1)}).catch(function(e){a.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function l(){var o={id:u.selectedItem.id,categoryName:u.selectedItem.categoryName};t.formPostRequest(e.updateCategory,o).then(function(e){0==e.data.status?(a.swal("编辑成功",e.data.msg,"success"),u.modalInfo.showCategoryModal=!1,u.getDatas("category","Category")):(a.swal({title:"编辑失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"}),u.modalInfo.showCategoryModal=!1)}).catch(function(e){a.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}var u=this;u.departmentLoading=!1,u.categoryLoading=!1,u.departmentArray=[],u.categoryArray=[],u.deptShowPencilLable=999,u.catShowPencilLable=999,u.addDepartmentInput="",u.addCategoryInput="",u.selectedItem={},u.modalInfo={showDepartmentModal:!1,showCategoryModal:!1},u.showModal=o,u.getDatas=r,u.deleteDatas=n,u.addDepartment=s,u.updateDepartment=c,u.addCategory=i,u.updateCategory=l,u.getDatas("department","Department"),u.getDatas("category","Category")}angular.module("app").component("cdManagement",function(){return{templateUrl:"pages/cd-management/cd-management.template.html",controller:e}}()),e.$inject=["interfacesService","httpService","SweetAlert"]}(),function(){"use strict";function e(e){var t={debug:!0,events:!1,modules:[{name:"validation",files:["../vendor/angular-validation/dist/angular-validation.min.js"]}]};e.config(t)}angular.module("app").config(e),e.$inject=["$ocLazyLoadProvider"]}(),function(){"use strict";function e(e,t){var a={abstract:!0,templateUrl:"pages/sign-module/sign/sign.template.html"},o={url:"^/login",template:"<login></login>"},r={url:"^/register",template:"<register></register>"},n={url:"^/resetPassword",template:"<reset-password></reset-password>"},s={abstract:!0,templateUrl:"pages/main/main.template.html",resolve:{checkLogin:["authorizationService",function(e){return e.checkLogin()}]}},c={template:"<div ui-view></div>",breadcrumb:{label:"资产管理",parent:"main"}},i={url:"^/assetSearch",template:"<asset-search></asset-search>",breadcrumb:{label:"资产查询",parent:"main.assetManagement"}},l={url:"^/assetRecovery",template:"<asset-recovery></asset-recovery>",breadcrumb:{label:"资产恢复",parent:"main.assetManagement"}},u={url:"^/assetsInventory",template:'<asset-inventory inventory-type="&quot;getNotCompleteInventory&quot;"></asset-inventory>',breadcrumb:{label:"资产盘点",parent:"main.assetManagement"}},d={url:"^/cdManagement",template:"<cd-management></cd-management>",breadcrumb:{label:"类属管理",parent:"main"}};e.state("sign",a),e.state("sign.login",o),e.state("sign.register",r),e.state("sign.resetPassword",n),e.state("main",s),e.state("main.assetManagement",c),e.state("main.assetManagement.assetSearch",i),e.state("main.assetManagement.assetRecovery",l),e.state("main.assetManagement.assetsInventory",u),e.state("main.cdManagement",d),t.otherwise("assetSearch")}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){var t={number:/^\d+$/,phone:/^1[\d]{10}$/,email:/^([a-z0-9]*[-_.]?[a-z0-9]+)+@([a-z0-9]*[-_]?[a-z0-9]+)+[\.][a-z]{2,3}([\.][a-z]{2})?$/i,password:function(e){return(e+"").length>7},required:function(e){return!!e}},a={number:{success:"",error:"必须是数字"},phone:{success:"",error:"必须是11位手机号"},email:{success:"",error:"请输入有效的邮箱地址"},password:{success:"",error:"密码长度至少8位"},required:{success:"",error:"不能为空"}};e.setExpression(t).setDefaultMsg(a)}angular.module("app").config(e),e.$inject=["$validationProvider"]}(),function(){"use strict";function e(){function e(e,t,a){"#"===a.href&&t.on("click",function(e){e.preventDefault()})}return{restrict:"E",link:e}}function t(){function e(e,t,a){"collapse"==a.toggle&&t.attr("href","javascript;;").attr("data-target",a.href.replace("index.html",""))}return{restrict:"E",link:e}}function a(){function e(e,t,a){t.hasClass("nav-dropdown-toggle")&&angular.element("body").width()>782?t.on("click",function(){angular.element("body").hasClass("compact-nav")||t.parent().toggleClass("open").find(".open").removeClass("open")}):t.hasClass("nav-dropdown-toggle")&&angular.element("body").width()<783&&t.on("click",function(){t.parent().toggleClass("open").find(".open").removeClass("open")})}return{restrict:"E",link:e}}function o(e,t){function a(t,a,o){if(a.hasClass("sidebar-nav")&&angular.element("body").hasClass("fixed-nav")){var r=angular.element(window).height();t.$watch(function(){var e=angular.element("header").outerHeight();angular.element("body").hasClass("sidebar-off-canvas")?a.css("height",r):a.css("height",r-e)}),angular.element(e).bind("resize",function(){var e=angular.element(window).height(),t=angular.element("header").outerHeight(),o=angular.element(".sidebar-header").outerHeight(),r=angular.element(".sidebar-footer").outerHeight();angular.element("body").hasClass("sidebar-off-canvas")?a.css("height",e-o-r):a.css("height",e-t-o-r)})}}return{restrict:"E",link:a}}function r(e){function t(e,t,a){t.on("click",function(){t.hasClass("sidebar-toggler")&&angular.element("body").toggleClass("sidebar-hidden"),t.hasClass("aside-menu-toggler")&&angular.element("body").toggleClass("aside-menu-hidden")})}return{restrict:"E",link:t}}function n(){function e(e,t,a){t.on("click",function(){t.hasClass("navbar-toggler")&&!t.hasClass("layout-toggler")&&angular.element("body").toggleClass("sidebar-mobile-show")})}return{restrict:"E",link:e}}function s(){function e(e,t,a){"carousel"==a.ride&&t.find("a").each(function(){$(this).attr("data-target",$(this).attr("href").replace("index.html","")).attr("href","javascript;;")})}return{restrict:"E",link:e}}function c(){function e(e,t,a){"tooltip"==a.toggle&&angular.element(t).tooltip(),"popover"==a.toggle&&angular.element(t).popover()}return{restrict:"A",link:e}}function i(){function e(e,t,a){t.click(function(e){e.preventDefault(),angular.element(t).tab("show")})}return{restrict:"A",link:e}}function l(){function e(e,t,a){if("collapse"==a.toggle&&t.parent().hasClass("card-actions")){t.parent().parent().parent().find(".card-block").hasClass("in")&&t.find("i").addClass("r180");var o="collapse-"+Math.floor(1e9*Math.random()+1);t.attr("data-target","#"+o),t.parent().parent().parent().find(".card-block").attr("id",o),t.on("click",function(){t.find("i").toggleClass("r180")})}}return{restrict:"E",link:e}}angular.module("app").directive("a",e).directive("a",t).directive("a",a).directive("button",r).directive("a",r).directive("button",n).directive("div",s).directive("toggle",c).directive("tab",i).directive("button",l),o.$inject=["$window","$timeout"],r.$inject=["$interval"]}(),function(){"use strict";function e(e,t,a,o){function r(){var e=a.defer(),r=e.promise;return s=angular.fromJson(o.get("identity")),e.resolve(s),r.then(function(e){e||t.go("sign.login")})}function n(){var e;if(e=angular.fromJson(o.get("identity")))return e}var s=void 0;return{checkLogin:r,getUserInfo:n}}angular.module("app").factory("authorizationService",e),e.$inject=["$rootScope","$state","$q","cacheService"]}(),function(){"use strict";function e(e){function t(t,a,o){e.put(t,a,o)}function a(t){return e.get(t)}function o(t){e.remove(t)}return{put:t,get:a,remove:o}}angular.module("app").factory("cacheService",e),e.$inject=["$cookies"]}(),function(){"use strict";function e(e,t){function a(a,o){var r=t.defer();return e({method:"GET",url:a,data:{params:o}}).then(function(e){r.resolve(e)}).catch(function(e){r.reject(e)}),r.promise}function o(a,o){var r=t.defer();return e.post(a,JSON.stringify(o)).then(function(e){r.resolve(e)}).catch(function(e){r.reject(e)}),r.promise}function r(a,o){var r=t.defer();return e({method:"POST",url:a,
data:o,headers:{"Content-Type":"application/x-www-form-urlencoded; charser=UTF-8"},transformRequest:function(e){var t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}}).then(function(e){r.resolve(e)}).catch(function(e){r.reject(e)}),r.promise}function n(a,o){var r=t.defer();return e({method:"POST",url:a,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded; charser=UTF-8"},withCredentials:!0,transformRequest:function(e){var t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}}).then(function(e){r.resolve(e)}).catch(function(e){r.reject(e)}),r.promise}function s(a,o,r,n,s,c,i){var l=t.defer(),u="",d="",m="";switch(o){case"":break;case"assetId":u=""!==r?r:"";break;case"assetName":d=""!==r?r:"";break;case"personInCharge":m=""!==r?r:""}return e.get(a,{params:{assetId:u,assetName:d,brandSpecification:"",personInCharge:m,assetCategory:n,departmentResponsibility:s,pageNum:c,pageSize:i}}).then(function(e){l.resolve(e)}).catch(function(e){l.reject(e)}),l.promise}return{getRequest:a,JSONPostRequest:o,formPostRequest:r,withCredentialsPostRequest:n,getTableInfoRequest:s}}angular.module("app").factory("httpService",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(){var e="http://192.168.1.124:3001/",t=e;return{getAssetUrl:t+"asset/getAssetSelect.do",addUrl:t+"asset/addAssetItem.do",updateUrl:t+"asset/updateAssetInfo.do",deleteUrl:t+"asset/deleteItem.do",printQRcode:t+"asset/printQRcode.do",importUrl:t+"asset/importAssetRecord.do",exportUrl:t+"asset/exportStorageRecord.do",clearInventoryAmount:t+"asset/clearInventoryAmount.do",assetsInventory:t+"asset/assetsInventory.do",getCompleteInventory:t+"asset/getCompleteInventory.do",getNotCompleteInventory:t+"asset/getNotCompleteInventory.do",getAssetRecycle:t+"asset/getAssetRecycle.do",deleteAssetRecycleItem:t+"asset/deleteAssetRecycleItem.do",deleteAssetRecycleMultiItem:t+"asset/deleteAssetRecycleMultiItem.do",notExistItemInAssetTable:t+"asset/notExistItemInAssetTable.do",notExistMultiItemInAssetTable:t+"asset/notExistMultiItemInAssetTable.do",recycleAssetItem:t+"asset/recycleAssetItem.do",recycleAssetMultiItem:t+"asset/recycleAssetMultiItem.do",getDepartment:t+"manage/department/getDepartment.do",addDepartment:t+"manage/department/addDepartment.do",updateDepartment:t+"manage/department/updateDepartment.do",deleteDepartment:t+"manage/department/deleteDepartment.do",getCategory:t+"manage/assetCategory/getCategory.do",addCategory:t+"manage/assetCategory/addCategory.do",updateCategory:t+"manage/assetCategory/updateCategory.do",deleteCategory:t+"manage/assetCategory/deleteCategory.do",register:e+"user/register.do",login:e+"user/login.do",logout:e+"user/logout.do",resetPassword:e+"user/reset_password.do",sendVerificationCode:e+"user/sendVerificationCode.do",sendResetVerificationCode:e+"user/sendResetVerificationCode.do"}}angular.module("app").factory("interfacesService",e),e.$inject=[]}(),function(){"use strict";function e(e,t,a,o,r){function n(){var n=s.user,c={password:n.password,phone:n.phone};a.withCredentialsPostRequest(t.login,c).then(function(t){if(0===t.data.status){var a=new Date;a.setDate(a.getDate()+7),o.put("identity",angular.toJson(t.data.data),{expires:a.toUTCString()}),e.go("main.assetManagement.assetSearch")}else r.swal({title:"登陆失败",text:t.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})}).catch(function(e){r.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}var s=this;s.user={password:"",phone:""},s.login=n}angular.module("app").component("login",function(){return{templateUrl:"pages/sign-module/login/login.template.html",controller:e}}()),e.$inject=["$state","interfacesService","httpService","cacheService","SweetAlert"]}(),function(){"use strict";function e(e,t,a,o,r,n){function s(){u.time||u.sendVerificationCode()}function c(){d=60,u.time="60s";var e=a(function(){d<=0?(a.cancel(e),u.time=""):(d--,u.time=d+"s")},1e3)}function i(){var e={phone:u.user.phone};r.withCredentialsPostRequest(o.sendVerificationCode,e).then(function(e){0===e.data.status?u.countDown():n.swal({title:"验证码发送失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})}).catch(function(e){n.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function l(){var a=u.user,s={username:a.name,password:a.password,phone:a.phone,verificationCode:a.message};r.withCredentialsPostRequest(o.register,s).then(function(a){0===a.data.status?n.swal({title:"注册成功",text:"现在返回登录页面",type:"success",confirmButtonText:"去登陆"},function(){t(function(){e.go("sign.login")},500)}):n.swal({title:"注册失败",text:a.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})}).catch(function(e){n.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}var u=this,d=60;u.time="",u.user={name:"",password:"",passwordConfirm:"",phone:"",message:""},u.check=s,u.countDown=c,u.sendVerificationCode=i,u.register=l}angular.module("app").component("register",function(){return{templateUrl:"pages/sign-module/register/register.template.html",controller:e}}()),e.$inject=["$state","$timeout","$interval","interfacesService","httpService","SweetAlert"]}(),function(){"use strict";function e(e,t,a,o,r,n){function s(){u.time||u.sendResetVerificationCode()}function c(){d=60,u.time="60s";var e=a(function(){d<=0?(a.cancel(e),u.time=""):(d--,u.time=d+"s")},1e3)}function i(){var e={phone:u.user.phone};r.withCredentialsPostRequest(o.sendResetVerificationCode,e).then(function(e){0===e.data.status?u.countDown():n.swal({title:"验证码发送失败",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})}).catch(function(e){n.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}function l(){var a=u.user,s={password:a.password,phone:a.phone,verificationCode:a.message};r.withCredentialsPostRequest(o.resetPassword,s).then(function(a){0===a.data.status?n.swal({title:"重置密码成功",text:"现在返回登录页面",type:"success",confirmButtonText:"去登陆"},function(){t(function(){e.go("sign.login")},500)}):n.swal({title:"重置密码失败",text:a.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})}).catch(function(e){n.swal({title:"服务器出错了",text:e.data.msg,type:"error",confirmButtonColor:"#F27474",confirmButtonText:"确定"})})}var u=this,d=60;u.time="",u.user={password:"",passwordConfirm:"",phone:"",message:""},u.check=s,u.countDown=c,u.sendResetVerificationCode=i,u.resetPassword=l}angular.module("app").component("resetPassword",function(){return{templateUrl:"pages/sign-module/reset-password/reset-password.template.html",controller:e}}()),e.$inject=["$state","$timeout","$interval","interfacesService","httpService","SweetAlert"]}();